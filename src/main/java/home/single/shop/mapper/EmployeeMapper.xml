<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="home.single.shop.mapper.EmployeeMapper">
	
	<!-- 비밀번호 재설정 -->
	<update id="updateEmployeePwByReset" parameterType="home.single.shop.vo.Employee">
		UPDATE employee
		SET employee_pw = PASSWORD(#{employeePw}), updatedate = NOW()
		WHERE employee_id = #{employeeId}
	</update>
	
	<!-- 직원 계정 찾기 -->
	<select id="employeeIdFind" parameterType="home.single.shop.vo.EmployeeInfo" resultType="String">
		SELECT
			employee_id employeeId
		FROM employee_info
		WHERE employee_name = #{employeeName} AND employee_email = #{employeeEmail}
	</select>
	
	<!-- 직원 로그인 -->
	<select id="employeeLogin" parameterType="home.single.shop.vo.Employee" resultType="home.single.shop.vo.Employee">
		SELECT 
			employee_id employeeId
			, employee_level employeeLevel
			, employee_state employeeState
		FROM employee
		WHERE employee_id = #{employeeId} AND employee_pw = PASSWORD(#{employeePw})
	</select>	
</mapper>